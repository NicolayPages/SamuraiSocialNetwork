(this.webpackJsonpreact01=this.webpackJsonpreact01||[]).push([[9],{290:function(e,t,a){e.exports={messageItem:"ChatPage_messageItem__3hgfY",ava:"ChatPage_ava__1opON",flex:"ChatPage_flex__1VMbX",name:"ChatPage_name__2FBv3",message:"ChatPage_message__27PZF",messages:"ChatPage_messages__1IlCN",messageForm:"ChatPage_messageForm__3KEJ3",area:"ChatPage_area__2Hu4-",btn:"ChatPage_btn__1qMsf",chat:"ChatPage_chat__XQP9r",title:"ChatPage_title__30Eor"}},297:function(e,t,a){"use strict";a.r(t);var s=a(27);var c=a(0),r=a.n(c),n=a(8),i=a(53),j=a(290),l=a.n(j),o=a(28),u=a(16),b=a(2),h=function(){var e=Object(n.b)(),t=Object(n.c)((function(e){return e.chat.status}));return Object(c.useEffect)((function(){return e(Object(i.c)()),function(){e(Object(i.d)())}}),[]),Object(b.jsxs)(b.Fragment,{children:["error"===t&&Object(b.jsx)("div",{children:"Some error occured. Please refresh the page"}),Object(b.jsxs)("div",{className:l.a.chat,children:[Object(b.jsx)("h1",{className:l.a.title,children:"Users chat"}),Object(b.jsx)(m,{}),Object(b.jsx)(O,{})]})]})},m=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(n.c)((function(e){return e.chat.messages})),a=Object(c.useRef)(null),r=Object(c.useState)(!0),i=Object(s.a)(r,2),j=i[0],o=i[1];Object(c.useEffect)((function(){var e;j&&(null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[t]);var u=t.map((function(e){return Object(b.jsx)(d,{message:e},e.id)}));return Object(b.jsxs)("div",{onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!j&&o(!0):j&&o(!1)},className:l.a.messages,children:[u,Object(b.jsx)("div",{ref:a})]})},d=r.a.memo((function(e){var t=e.message;return Object(b.jsxs)("div",{className:l.a.messageItem,children:[Object(b.jsx)("div",{className:l.a.ava,children:Object(b.jsxs)(u.b,{to:"profile/"+t.userId,children:[" ",Object(b.jsx)("img",{src:t.photo?t.photo:o.a})]})}),Object(b.jsxs)("div",{className:l.a.flex,children:[Object(b.jsx)("h4",{className:l.a.name,children:t.userName}),Object(b.jsx)("p",{className:l.a.message,children:t.message})]})]})})),O=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],j=Object(n.b)(),o=Object(n.c)((function(e){return e.chat.status}));return Object(b.jsxs)("div",{className:l.a.messageForm,children:[Object(b.jsx)("textarea",{onChange:function(e){return r(e.currentTarget.value)},value:a,className:l.a.area,placeholder:"write message..."}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{disabled:"ready"!==o,onClick:function(){a&&(j(Object(i.b)(a)),r(""))},className:l.a.btn,children:"send"})})]})};t.default=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(h,{})})}}}]);
//# sourceMappingURL=9.1cc631e5.chunk.js.map
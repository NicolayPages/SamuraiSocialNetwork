{"version":3,"sources":["components/common/ErrorPopup/ErrorPopup.module.scss","components/Header/Header.module.scss","selectors/auth-selectors.ts","components/Sidebar/Friends/Friends.module.scss","redux/auth-reducer.ts","components/Sidebar/Sidebar.module.scss","assets/images/user.png","redux/profile-reducer.ts","components/Footer/Footer.module.scss","components/common/Preloader/Preloader.tsx","components/common/Preloader/Preloader.module.scss","components/common/MiniPreloader/Preloader.module.scss","selectors/profile-selectors.ts","redux/dialogs-reducer.ts","api.ts","assets/images/error.jpg","selectors/error-selectors.ts","components/common/ErrorPopup/ErrorPopup.tsx","utilits/validators/object-helpers.ts","redux/users-reducer.ts","chat-api.ts","redux/chat-reducer.ts","redux/errors-reducer.ts","components/Footer/Footer.tsx","components/Header/Header.tsx","assets/images/logo.png","redux/sidebar-reducer.ts","selectors/sidebar-selectors.ts","components/common/MiniPreloader/Preloader.tsx","components/Sidebar/Friends/Friends.tsx","components/Sidebar/Menu_link/Menu_link.tsx","components/Sidebar/Sidebar.tsx","redux/app-reducer.ts","App.tsx","reportWebVitals.js","redux/redux-store.ts","index.tsx"],"names":["module","exports","getIsAuth","state","auth","isAuth","getLogin","login","getUserId","userId","getCaptcha","captcha","getAuthError","authError","getInitialized","app","initialized","initialState","email","actions","type","data","error","authUserData","dispatch","a","authAPI","getUserData","resultCode","ResultCodeEnum","Success","id","showError","message","authUserLogIn","password","rememberMe","logInUser","CaptchaIsRequired","getCapthchaUrl","errorMessage","messages","length","authUserLogOut","logOutUser","securityAPI","url","authReducer","action","posts","likes","profile","isFetching","status","editMode","localIsFetching","addPostActionCreator","postMessage","setUserProfile","toggleIsFetching","setStatus","deletePost","postId","likePost","postLike","setPhoto","photosFiles","toggleLocalIsFetching","onEditMode","offEditMode","setProfileError","getUserProfile","profileAPI","getProfile","response","getStatus","updateStatus","updatePhoto","photoFile","photos","updateProfile","profileData","getState","profileReducer","newPost","filter","p","map","Preloader","React","memo","className","s","wrapper","ldsDualRing","profilePage","getIsFetching","getUserStatus","getPosts","getEditMode","getLocalIsFetching","getProfileError","dialogs","name","addMessageActionCreator","getNewMessages","getAllMessages","dialogsAPI","getMessages","console","log","startNewChat","startChatting","dialogsReducer","newMessage","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","term","friend","get","then","followUser","post","unfollowUser","delete","getFiends","put","getUsersForProfile","formData","FormData","append","newData","getUserPhoto","getErrorMessage","errors","ErrorPopup","useSelector","useDispatch","deactivateMode","wrapperNone","wrapperBody","header","title","closeWrapper","close","onClick","content","subtitle","image","src","errorIcon","alt","updateObjectInArray","items","itemId","objPropName","newObjProps","u","users","totalUserCount","isFollowing","totalCount","followUnfollowFlow","apiMethod","actionCreator","requestUsers","followUsers","bind","unfollowUsers","usersReducer","followed","subcribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","forEach","openHandler","errorHandler","cleanUp","removeEventListener","WebSocket","addEventListener","chatAPI","eventName","callback","push","send","payload","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","sendMessage","chatReducer","m","uuidv1","index","array","errorsMode","activateMode","errorsReducer","Footer","container","Footer__copy","HeaderContainer","useEffect","Header","props","headerBody","logo","loginBlock","login_wrapper","login_ava","small","userPhoto","btn","to","links","address","friends","sidebarReducer","getLinks","sidebar","getFriends","getPageSize","getCurrentPage","MiniPreloader","Friends","friendsElements","f","Friend","photo","flex","icon","Menu_link","path","sidebar__link","activeClassName","active","SidebarContainer","requestFriends","Sidebar","menuElements","l","Sidebar__list","appReducer","ProfileContainer","lazy","DialogsContainer","UsersContainer","LoginContainer","NotFound","ChatPage","compose","withRouter","promise","Promise","all","fallback","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","dialogsPage","usersPage","chat","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3befdec4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapperNone\":\"ErrorPopup_wrapperNone__1EKn_\",\"wrapper\":\"ErrorPopup_wrapper__JRpyc\",\"wrapperBody\":\"ErrorPopup_wrapperBody__1uy62\",\"closeWrapper\":\"ErrorPopup_closeWrapper__1L355\",\"header\":\"ErrorPopup_header__1p1Sh\",\"title\":\"ErrorPopup_title__2stoK\",\"close\":\"ErrorPopup_close__3dTTe\",\"content\":\"ErrorPopup_content__1GiGB\",\"subtitle\":\"ErrorPopup_subtitle__3_Suh\",\"image\":\"ErrorPopup_image__Qr0-o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__14q2p\",\"logo\":\"Header_logo__3XlIA\",\"container\":\"Header_container__2zgjm\",\"headerBody\":\"Header_headerBody__3L2xV\",\"loginBlock\":\"Header_loginBlock__5-fvZ\",\"login_wrapper\":\"Header_login_wrapper__1g1hm\",\"login_ava\":\"Header_login_ava__ck3w4\",\"login\":\"Header_login__dSwZ1\",\"btn\":\"Header_btn__8NYfP\"};","import { AppStateType } from \"../redux/redux-store\";\r\n\r\nexport const getIsAuth = (state: AppStateType) => {\r\n   return state.auth.isAuth\r\n};\r\nexport const getLogin = (state: AppStateType) => {\r\n   return state.auth.login\r\n};\r\nexport const getUserId = (state: AppStateType) => {\r\n   return state.auth.userId\r\n};\r\nexport const getCaptcha = (state: AppStateType) => {\r\n   return state.auth.captcha\r\n};\r\nexport const getAuthError = (state: AppStateType) => {\r\n   return state.auth.authError\r\n};\r\n\r\nexport const getInitialized = (state: AppStateType) => {\r\n   return state.app.initialized\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Friends_title__3sdAS\",\"friend\":\"Friends_friend__3U11j\",\"flex\":\"Friends_flex__2amwk\",\"icon\":\"Friends_icon__3UfN2\",\"name\":\"Friends_name__10bK-\"};","import { ThunkAction } from 'redux-thunk';\r\nimport { authAPI, ResultCodeEnum, securityAPI } from '../api';\r\nimport { showError } from './errors-reducer';\r\nimport { AppStateType, InferActionsTypes } from './redux-store';\r\n\r\n\r\nlet initialState = {\r\n   userId: null as number | null,\r\n   email: null as string | null,\r\n   login: null as string | null,\r\n   isAuth: false,\r\n   captcha: null as string | null,\r\n   authError: null as string | null,\r\n};\r\ntype initialStateType = typeof initialState\r\n\r\n\r\nconst authReducer = (state = initialState, action: ActionTypes): initialStateType => {\r\n   switch (action.type) {\r\n      case 'SET_USER_DATA': {\r\n         return {\r\n            ...state,\r\n            ...action.data,\r\n            isAuth: true,\r\n         };\r\n      };\r\n      case 'SET_CAPTCHA': {\r\n         return {\r\n            ...state,\r\n            captcha: action.captcha,\r\n         }\r\n      };\r\n      case 'SET_LOGOUT': {\r\n         return {\r\n            ...state,\r\n            ...action.data,\r\n         };\r\n      };\r\n      case 'SET_AUTH_ERROR': {\r\n         return {\r\n            ...state,\r\n            authError: action.error\r\n         };\r\n      };\r\n      default:\r\n         return state;\r\n   };\r\n};\r\n\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>\r\n\r\nexport const actions = {\r\n   setAuthUserData: (userId: number | null, email: string | null, login: string | null, captcha: string | null) => ({ type: 'SET_USER_DATA', data: { userId, email, login, captcha } } as const),\r\n\r\n   setAuthLogin: (email: string | null, password: string | null, rememberMe: boolean) => ({ type: 'SET_LOGIN', formData: { email, password, rememberMe } } as const),\r\n\r\n   setAuthLogout: (userId: null, email: null, login: null, isAuth: boolean, authError: null) => ({ type: 'SET_LOGOUT', data: { userId, email, login, isAuth, authError } } as const),\r\n\r\n   setSecurityCaptcha: (captcha: string) => ({ type: 'SET_CAPTCHA', captcha } as const),\r\n\r\n   setAuthError: (error: string) => ({ type: 'SET_AUTH_ERROR', error } as const),\r\n}\r\n\r\n\r\n\r\n\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>\r\n\r\nexport const authUserData = (): ThunkType => async (dispatch) => {\r\n   try {\r\n      let data = await authAPI.getUserData();\r\n      if (data.resultCode === ResultCodeEnum.Success) {\r\n         let { id, email, login, captcha } = data.data;\r\n         dispatch(actions.setAuthUserData(id, email, login, captcha));\r\n      }\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport const authUserLogIn = (email: string, password: string, rememberMe: boolean, captcha: string | null): ThunkType => async (dispatch: any) => {\r\n   try {\r\n      let data = await authAPI.logInUser(email, password, rememberMe, captcha)\r\n      if (data.resultCode == ResultCodeEnum.Success) {\r\n         dispatch(authUserData())\r\n      } else {\r\n         if (data.resultCode == ResultCodeEnum.CaptchaIsRequired) {\r\n            dispatch(getCapthchaUrl())\r\n         }\r\n         let errorMessage = data.messages.length > 0 ? data.messages[0] : \"Some error\";\r\n         dispatch(actions.setAuthError(errorMessage))\r\n      }\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n\r\n};\r\n\r\nexport const authUserLogOut = (): ThunkType => async (dispatch) => {\r\n   try {\r\n      let data = await authAPI.logOutUser();\r\n      if (data.resultCode == ResultCodeEnum.Success) {\r\n         dispatch(actions.setAuthLogout(null, null, null, false, null,));\r\n      }\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport const getCapthchaUrl = (): ThunkType => async (dispatch) => {\r\n   try {\r\n      let data = await securityAPI.getCaptcha();\r\n      dispatch(actions.setSecurityCaptcha(data.url));\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\n\r\n\r\nexport default authReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Sidebar\":\"Sidebar_Sidebar__2SyFz\",\"Sidebar__list\":\"Sidebar_Sidebar__list__2sYKm\",\"sidebar__link\":\"Sidebar_sidebar__link__2eWD7\"};","export default __webpack_public_path__ + \"static/media/user.4e009506.png\";","import { ThunkAction } from 'redux-thunk';\r\nimport { profileAPI, ResultCodeEnum } from '../api';\r\nimport { PhotosType, ProfileType } from '../types/types';\r\nimport { showError } from './errors-reducer';\r\nimport { AppStateType, InferActionsTypes } from './redux-store';\r\n\r\n\r\nexport type PostsType = {\r\n   id: number\r\n   message: string\r\n   likes: number\r\n}\r\ntype ActionTypes = InferActionsTypes<typeof actions>\r\n\r\nlet initialState = {\r\n   posts: [\r\n      { id: 1, message: \"Hi, how are you\", likes: 2, },\r\n      { id: 2, message: \"Hello everyone\", likes: 12, },\r\n      { id: 3, message: \"My pet project\", likes: 5, },\r\n   ] as Array<PostsType>,\r\n   profile: null as ProfileType | null,\r\n   isFetching: false,\r\n   status: '',\r\n   editMode: false,\r\n   localIsFetching: false,\r\n   errorMessage: null as string | null\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst profileReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n   switch (action.type) {\r\n      case 'ADD_POST': {\r\n         let newPost = {\r\n            id: state.posts.length + 2,\r\n            message: action.postMessage,\r\n            likes: 0,\r\n         };\r\n         return {\r\n            ...state,\r\n            posts: [newPost, ...state.posts],\r\n         };\r\n      };\r\n      case 'SET_USER_PROFILE': {\r\n         return { ...state, profile: action.profile, }\r\n      };\r\n      case 'IS_FETCHING':\r\n         return {\r\n            ...state, isFetching: action.isFetching\r\n         };\r\n      case 'LOCAL_IS_FETCHING':\r\n         return {\r\n            ...state, localIsFetching: action.localIsFetching\r\n         };\r\n      case 'SET_STATUS':\r\n         return {\r\n            ...state,\r\n            status: action.status\r\n         };\r\n      case 'DELETE_POST':\r\n         return {\r\n            ...state,\r\n            posts: state.posts.filter(p => p.id != action.postId),\r\n         };\r\n      case 'LIKE_POST':\r\n         return {\r\n            ...state,\r\n            posts: state.posts.map(p => {\r\n               if (p.id === action.postId) {\r\n                  return { ...p, likes: action.postLike, }\r\n               }\r\n               return p;\r\n            }),\r\n         };\r\n      case 'SAVE_PHOTO_SUCCESS':\r\n         return {\r\n            ...state,\r\n            profile: { ...state.profile, photos: action.photosFiles } as ProfileType,\r\n         };\r\n      case 'ON_EDIT_MODE':\r\n         return {\r\n            ...state,\r\n            editMode: true,\r\n         };\r\n      case 'OFF_EDIT_MODE':\r\n         return {\r\n            ...state,\r\n            editMode: false,\r\n         };\r\n      case 'SET_PROFILE_ERROR':\r\n         return {\r\n            ...state,\r\n            errorMessage: action.errorMessage\r\n         };\r\n      default:\r\n         return state;\r\n   }\r\n};\r\n\r\n\r\nexport const actions = {\r\n   addPostActionCreator: (postMessage: string) => ({ type: 'ADD_POST', postMessage } as const),\r\n   setUserProfile: (profile: ProfileType) => ({ type: 'SET_USER_PROFILE', profile, } as const),\r\n   toggleIsFetching: (isFetching: boolean) => ({ type: 'IS_FETCHING', isFetching } as const),\r\n   setStatus: (status: string) => ({ type: 'SET_STATUS', status, } as const),\r\n   deletePost: (postId: number) => ({ type: 'DELETE_POST', postId } as const),\r\n   likePost: (postId: number, postLike: number) => ({ type: 'LIKE_POST', postId, postLike } as const),\r\n   setPhoto: (photosFiles: PhotosType) => ({ type: 'SAVE_PHOTO_SUCCESS', photosFiles } as const),\r\n   toggleLocalIsFetching: (localIsFetching: boolean) => ({ type: 'LOCAL_IS_FETCHING', localIsFetching } as const),\r\n   onEditMode: () => ({ type: 'ON_EDIT_MODE' } as const),\r\n   offEditMode: () => ({ type: 'OFF_EDIT_MODE' } as const),\r\n   setProfileError: (errorMessage: string | null) => ({ type: 'SET_PROFILE_ERROR', errorMessage } as const),\r\n}\r\n\r\n\r\n\r\n\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionTypes>\r\n\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch) => {\r\n   dispatch(actions.toggleIsFetching(true));\r\n   let response = await profileAPI.getProfile(userId);\r\n   dispatch(actions.setUserProfile(response.data));\r\n   dispatch(actions.toggleIsFetching(false));\r\n};\r\n\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {\r\n   let response = await profileAPI.getStatus(userId);\r\n   dispatch(actions.setStatus(response.data));\r\n};\r\n\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\r\n   try {\r\n      let response = await profileAPI.updateStatus(status)\r\n      if (response.data.resultCode === ResultCodeEnum.Success) {\r\n         dispatch(actions.setStatus(status));\r\n      }\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport const updatePhoto = (photoFile: PhotosType): ThunkType => async (dispatch) => {\r\n   try {\r\n      dispatch(actions.toggleLocalIsFetching(true))\r\n      let response = await profileAPI.updatePhoto(photoFile)\r\n      if (response.data.resultCode === ResultCodeEnum.Success) {\r\n         dispatch(actions.setPhoto(response.data.data.photos));\r\n      }\r\n      dispatch(actions.toggleLocalIsFetching(false))\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport const updateProfile = (profileData: ProfileType): ThunkType => async (dispatch, getState: any) => {\r\n   dispatch(actions.toggleIsFetching(true))\r\n   try {\r\n      const userId = getState().auth.userId\r\n      let response = await profileAPI.updateProfile(profileData)\r\n      if (response.data.resultCode === ResultCodeEnum.Success) {\r\n         dispatch(getUserProfile(userId));\r\n         dispatch(actions.offEditMode());\r\n      } else {\r\n         let errorMessage = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n         dispatch(actions.setProfileError(errorMessage));\r\n      }\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n   dispatch(actions.toggleIsFetching(false))\r\n};\r\n\r\n\r\nexport default profileReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Footer\":\"Footer_Footer__15rJg\",\"Footer__copy\":\"Footer_Footer__copy__1lXfc\"};","import React from 'react';\r\nimport s from './Preloader.module.scss';\r\n\r\n\r\nconst Preloader: React.FC = React.memo(() => {\r\n   return (\r\n      <div className={s.wrapper}>\r\n         <div className={s.ldsDualRing}></div>\r\n      </div>\r\n   );\r\n})\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsDualRing\":\"Preloader_ldsDualRing__3S__x\",\"wrapper\":\"Preloader_wrapper__2Qfjg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsDualRing\":\"Preloader_ldsDualRing__iMzi9\",\"wrapper\":\"Preloader_wrapper__kzYrf\"};","import { AppStateType } from \"../redux/redux-store\";\r\n\r\nexport const getProfile = (state: AppStateType) => {\r\n   return state.profilePage.profile\r\n};\r\nexport const getIsFetching = (state: AppStateType) => {\r\n   return state.profilePage.isFetching\r\n};\r\nexport const getUserStatus = (state: AppStateType) => {\r\n   return state.profilePage.status\r\n};\r\nexport const getPosts = (state: AppStateType) => {\r\n   return state.profilePage.posts\r\n};\r\n\r\nexport const getEditMode = (state: AppStateType) => {\r\n   return state.profilePage.editMode\r\n};\r\nexport const getLocalIsFetching = (state: AppStateType) => {\r\n   return state.profilePage.localIsFetching\r\n};\r\n\r\nexport const getProfileError = (state: AppStateType) => {\r\n   return state.profilePage.errorMessage\r\n};","import { ThunkAction } from \"redux-thunk\";\r\nimport { dialogsAPI, ResultCodeEnum } from \"../api\";\r\nimport { AppStateType, InferActionsTypes } from \"./redux-store\";\r\n\r\n\r\nexport type DialogsType = {\r\n   id: number\r\n   name: string\r\n}\r\nexport type MessagesType = {\r\n   id: number\r\n   name: string\r\n   message: string\r\n}\r\n\r\nlet initialState = {\r\n   dialogs: [\r\n      { id: 1, name: \"Billy\", },\r\n      { id: 2, name: \"Sergey\", },\r\n      { id: 3, name: \"Alex\", },\r\n   ] as Array<DialogsType>,\r\n   messages: [\r\n      { id: 1, name: \"Billy\", message: \"Oh shit Im sorry\" },\r\n      { id: 2, name: \"Alex\", message: \"Sorry fot what\" },\r\n   ] as Array<MessagesType>,\r\n   isFetching: false,\r\n};\r\n\r\n\r\ntype initialStateType = typeof initialState;\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>\r\n\r\nconst dialogsReducer = (state = initialState, action: ActionTypes): initialStateType => {\r\n   switch (action.type) {\r\n      case \"ADD_MESSAGE\": {\r\n         let newMessage = {\r\n            id: 4,\r\n            name: \"Dmitriy\",\r\n            message: action.message,\r\n         };\r\n         return {\r\n            ...state,\r\n            messages: [...state.messages, newMessage],\r\n         };\r\n      };\r\n      case 'SET_NEW_MESSAGES': {\r\n         return {\r\n            ...state,\r\n            dialogs: [...state.dialogs, action.data]\r\n         }\r\n      };\r\n      case 'TOGGLE_IS_FETCHING': {\r\n         return {\r\n            ...state,\r\n            isFetching: action.isFetching\r\n         }\r\n      };\r\n      default:\r\n         return state;\r\n   }\r\n};\r\n\r\n\r\n\r\nexport const actions = {\r\n   addMessageActionCreator: (message: string) => ({ type: 'ADD_MESSAGE', message } as const),\r\n   getNewMessages: (data: any) => ({ type: 'SET_NEW_MESSAGES', data } as const),\r\n   toggleIsFetching: (isFetching: boolean) => ({ type: 'TOGGLE_IS_FETCHING', isFetching } as const)\r\n}\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionTypes>\r\n\r\n\r\nexport const getAllMessages = (userId: number): ThunkType => async (dispatch) => {\r\n   dispatch(actions.toggleIsFetching(true))\r\n   try {\r\n      let data = await dialogsAPI.getMessages(userId)\r\n      if (data.resultCode == ResultCodeEnum.Success) {\r\n         console.log(data)\r\n      }\r\n   } catch (error) {\r\n      console.log(error)\r\n   }\r\n   dispatch(actions.toggleIsFetching(false))\r\n}\r\nexport const startNewChat = (userId: number): ThunkType => async (dispatch) => {\r\n   dispatch(actions.toggleIsFetching(true))\r\n   try {\r\n      let data = await dialogsAPI.startChatting(userId)\r\n      console.log(data)\r\n   } catch (error) {\r\n      console.log(error)\r\n   }\r\n   dispatch(actions.toggleIsFetching(false))\r\n}\r\n\r\nexport default dialogsReducer;","import React from 'react';\r\nimport axios from \"axios\";\r\nimport { PhotosType, ProfileType, UsersType } from './types/types';\r\n\r\n\r\nconst instance = axios.create({\r\n   withCredentials: true,\r\n   baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n   headers: {\r\n      'API-KEY': \"81df0079-0492-4de1-a05f-7da3384208ab\"\r\n   },\r\n});\r\n\r\nexport const usersAPI = {\r\n   getUsers(currentPage: number = 1, pageSize: number = 5, term: string = '', friend: null | boolean = null) {\r\n      return instance.get<GetUsersType>(`users?page=${currentPage}&count=${pageSize}&term=${term}` + (friend == null ? '' : `&friend=${friend}`))\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   followUser(id = 2) {\r\n      return instance.post<FollowType>(`follow/${id}`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   unfollowUser(id = 2) {\r\n      return instance.delete<FollowType>(`follow/${id}`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   getFiends(currentPage = 1, pageSize = 3) {\r\n      return instance.get<GetUsersType>(`users?page=${currentPage}&count=${pageSize}&friend=true`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n};\r\n\r\nexport const profileAPI = {\r\n   getProfile(userId: number) {\r\n      return instance.get<ProfileType>(`profile/${userId}`)\r\n   },\r\n   getStatus(userId: number) {\r\n      return instance.get<string>(`profile/status/${userId}`)\r\n   },\r\n   updateStatus(status: string) {\r\n      return instance.put<UpdateStatusType>(`profile/status`, { status });\r\n   },\r\n   getUsersForProfile() {\r\n      return instance.get<GetUsersType>(`users`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   updatePhoto(photoFile: any) {\r\n      const formData = new FormData();\r\n      formData.append('image', photoFile)\r\n      return instance.put<UpdatePhotoType>(`profile/photo`, formData, {\r\n         headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n         }\r\n      });\r\n   },\r\n   updateProfile(newData: ProfileType) {\r\n      return instance.put<UpdateProfileType>(`profile`, newData);\r\n   },\r\n};\r\n\r\nexport const authAPI = {\r\n   getUserData() {\r\n      return instance.get<GetUserDataType>(`auth/me`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   getUserPhoto() {\r\n      return instance.get<GetPhotoDataType>(`profile/`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   logInUser(email: string, password: string, rememberMe: boolean = false, captcha: string | null = null,) {\r\n      return instance.post<LogInUserType>(`auth/login`, { email, password, rememberMe, captcha })\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n   logOutUser() {\r\n      return instance.delete<LogOutUserType>(`auth/login`)\r\n         .then(response => {\r\n            return response.data;\r\n         })\r\n   },\r\n};\r\n\r\nexport const securityAPI = {\r\n   getCaptcha() {\r\n      return instance.get<GetCaptchaType>(`security/get-captcha-url`).then(response => {\r\n         return response.data\r\n      })\r\n   },\r\n};\r\n\r\nexport const dialogsAPI = {\r\n   startChatting(userId: number) {\r\n      return instance.put(`dialogs/${userId}`, userId).then(response => {\r\n         debugger;\r\n         return response\r\n      })\r\n   },\r\n   getMessages(userId: number) {\r\n      return instance.get<any>(`dialogs/${userId}/messages`)\r\n         .then(response => {\r\n            return response.data\r\n         })\r\n   }\r\n}\r\n\r\n\r\n\r\n\r\nexport enum ResultCodeEnum {\r\n   Success = 0,\r\n   Error = 1,\r\n   CaptchaIsRequired = 10\r\n}\r\n\r\ntype GetUserDataType = {\r\n   data: {\r\n      id: number\r\n      email: string\r\n      login: string\r\n      captcha: string | null\r\n   }\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}\r\ntype GetPhotoDataType = {\r\n   data: PhotosType\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}\r\ntype LogInUserType = {\r\n   data: {\r\n      email: string\r\n      password: string\r\n      rememberMe: boolean\r\n      captcha: string | null\r\n   }\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}\r\ntype LogOutUserType = {\r\n   data: {}\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}\r\ntype UpdateStatusType = {\r\n   status: string\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}\r\ntype GetUsersType = {\r\n   error: null | string\r\n   items: Array<UsersType>\r\n   totalCount: number\r\n}\r\ntype FollowType = {\r\n   data: any\r\n   fieldsErrors: Array<any>\r\n   messages: Array<string>\r\n   resultCode: number\r\n}\r\ntype GetCaptchaType = {\r\n   url: string\r\n}\r\ntype UpdateProfileType = {\r\n   data: ProfileType\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}\r\ntype UpdatePhotoType = {\r\n   data: {\r\n      photos: PhotosType\r\n   }\r\n   resultCode: ResultCodeEnum\r\n   messages: Array<string>\r\n}","export default __webpack_public_path__ + \"static/media/error.d24ec31a.jpg\";","import { AppStateType } from \"../redux/redux-store\";\r\n\r\n\r\nexport const getErrorMessage = (state: AppStateType) => {\r\n   return state.errors.errorMessage\r\n}","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport errorIcon from '../../../assets/images/error.jpg';\r\nimport { actions } from '../../../redux/errors-reducer';\r\nimport { getErrorMessage } from '../../../selectors/error-selectors';\r\nimport s from './ErrorPopup.module.scss';\r\n\r\n\r\n\r\n\r\nconst ErrorPopup: React.FC = React.memo(() => {\r\n\r\n   const errorMessage = useSelector(getErrorMessage)\r\n   let dispatch = useDispatch()\r\n   let { deactivateMode } = actions\r\n\r\n   let onDeactivateMode = () => {\r\n      dispatch(deactivateMode())\r\n   }\r\n   let showError = errorMessage != null;\r\n   return (\r\n      <div className={showError ? s.wrapper : s.wrapperNone}>\r\n         <div className={s.wrapperBody}>\r\n            <div className={s.header}>\r\n               <h1 className={s.title}>Oops, something is wrong!</h1>\r\n               <div className={s.closeWrapper}><p className={s.close} onClick={onDeactivateMode}>x</p></div>\r\n            </div>\r\n            <div className={s.content}>\r\n               <h2 className={s.subtitle}>{errorMessage}</h2>\r\n               <div className={s.image}><img src={errorIcon} alt=\"\" /></div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   );\r\n})\r\n\r\n\r\n\r\nexport default ErrorPopup\r\n\r\n","export const updateObjectInArray = (items: Array<any>, itemId: number, objPropName: string, newObjProps: any) => {\r\n   return items.map(u => {\r\n      if (u[objPropName] === itemId) {\r\n         return { ...u, ...newObjProps }\r\n      };\r\n      return u;\r\n   });\r\n};","import { showError } from './errors-reducer';\r\nimport { updateObjectInArray } from '../utilits/validators/object-helpers';\r\nimport { usersAPI, profileAPI } from '../api';\r\nimport { UsersType } from '../types/types';\r\nimport { AppStateType, InferActionsTypes } from './redux-store';\r\nimport { ThunkAction } from 'redux-thunk';\r\n\r\n\r\ntype InitialStateType = typeof initialState\r\nexport type FilterTypes = typeof initialState.filter\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\n\r\n\r\n\r\nlet initialState = {\r\n   users: [] as Array<UsersType>,\r\n   pageSize: 10,\r\n   totalUserCount: 0,\r\n   currentPage: 1,\r\n   isFetching: false,\r\n   isFollowing: [] as any,\r\n   filter: {\r\n      term: '',\r\n      friend: null as null | boolean\r\n   }\r\n};\r\n\r\nconst usersReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n   switch (action.type) {\r\n      case 'FOLLOW':\r\n         return {\r\n            ...state,\r\n            users: updateObjectInArray(state.users, action.userId, 'id', { followed: true }),\r\n         };\r\n      case 'UN_FOLLOW':\r\n         return {\r\n            ...state,\r\n            users: updateObjectInArray(state.users, action.userId, 'id', { followed: false }),\r\n         };\r\n      case 'SET_USERS':\r\n         return {\r\n            ...state,\r\n            users: action.users,\r\n         };\r\n      case 'SET_PAGE':\r\n         return {\r\n            ...state, currentPage: action.currentPage,\r\n         };\r\n      case 'SET_TOTAL_COUNT':\r\n         return {\r\n            ...state, totalUserCount: action.totalCount,\r\n         };\r\n      case 'IS_FETCHING':\r\n         return {\r\n            ...state, isFetching: action.isFetching\r\n         };\r\n      case 'IS_FOLLOWING':\r\n         return {\r\n            ...state,\r\n            isFollowing: action.isFollowing\r\n               ? [...state.isFollowing, action.userId]\r\n               : state.isFollowing.filter((id: number) => id != action.userId)\r\n         };\r\n      case 'SET_FILTER':\r\n         return {\r\n            ...state, filter: action.filter\r\n         };\r\n      default:\r\n         return state;\r\n   }\r\n};\r\n\r\nexport const actions = {\r\n   follow: (userId: number) => ({ type: 'FOLLOW', userId } as const),\r\n   unfollow: (userId: number) => ({ type: 'UN_FOLLOW', userId } as const),\r\n   setUsers: (users: Array<UsersType>) => ({ type: 'SET_USERS', users } as const),\r\n   filterUsers: (filter: FilterTypes) => ({ type: 'SET_FILTER', filter } as const),\r\n   setPage: (currentPage: number) => ({ type: 'SET_PAGE', currentPage } as const),\r\n   setTotalCount: (totalCount: number) => ({ type: 'SET_TOTAL_COUNT', totalCount } as const),\r\n   toggleIsFetching: (isFetching: boolean) => ({ type: 'IS_FETCHING', isFetching } as const),\r\n   toggleIsFollowing: (isFollowing: boolean, userId: number) => ({ type: 'IS_FOLLOWING', isFollowing, userId } as const),\r\n}\r\n\r\n\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionTypes>\r\n\r\nconst followUnfollowFlow = async (dispatch: any, userId: number, apiMethod: any, actionCreator: any) => {\r\n   try {\r\n      dispatch(actions.toggleIsFollowing(true, userId));\r\n      let data = await apiMethod(userId)\r\n      if (data.resultCode == 0) {\r\n         dispatch(actionCreator(userId))\r\n      }\r\n      dispatch(actions.toggleIsFollowing(false, userId));\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport const requestUsers = (currentPage: number, pageSize: number, filter: { term: string, friend: null | boolean }): ThunkType => async (dispatch) => {\r\n   try {\r\n      dispatch(actions.toggleIsFetching(true));\r\n      dispatch(actions.filterUsers(filter));\r\n      dispatch(actions.setPage(currentPage));\r\n      let data = await usersAPI.getUsers(currentPage, pageSize, filter.term, filter.friend);\r\n      dispatch(actions.setUsers(data.items));\r\n      dispatch(actions.setTotalCount(data.totalCount));\r\n      dispatch(actions.toggleIsFetching(false));\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport const followUsers = (userId: number): ThunkType => {\r\n   return async (dispatch: any) => {\r\n      try {\r\n         followUnfollowFlow(dispatch, userId, usersAPI.followUser.bind(usersAPI), actions.follow)\r\n      } catch (error: any) {\r\n         dispatch(showError(error.message));\r\n      }\r\n   }\r\n};\r\n\r\nexport const unfollowUsers = (userId: number): ThunkType => {\r\n   return async (dispatch) => {\r\n      try {\r\n         followUnfollowFlow(dispatch, userId, usersAPI.unfollowUser.bind(usersAPI), actions.unfollow)\r\n      } catch (error: any) {\r\n         dispatch(showError(error.message));\r\n      }\r\n   }\r\n};\r\n\r\nexport const getUsersTest = () => async (dispatch: any) => {\r\n   try {\r\n      dispatch(actions.toggleIsFetching(true));\r\n      let data = await profileAPI.getUsersForProfile();\r\n      dispatch(actions.setUsers(data.items));\r\n      dispatch(actions.toggleIsFetching(false));\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport default usersReducer;","const subcribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subcribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n}\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n}\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subcribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subcribers['messages-received'] = []\r\n        subcribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type ChatMessageAPIType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'\r\n","import { AppStateType, InferActionsTypes } from './redux-store'\r\nimport { Dispatch } from 'redux'\r\nimport { chatAPI, ChatMessageAPIType, StatusType } from '../chat-api'\r\nimport { v1 as uuidv1 } from 'uuid';\r\nimport { ThunkAction } from 'redux-thunk';\r\n\r\n\r\ntype ChatMessageType = ChatMessageAPIType & { id: string }\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n}\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/chat/MESSAGES_RECEVIED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map(m => ({ ...m, id: uuidv1() }))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n        case 'SN/chat/STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) => ({\r\n        type: 'SN/chat/MESSAGES_RECEVIED', payload: { messages }\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: 'SN/chat/STATUS_CHANGED', payload: { status }\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status))\r\n        }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start()\r\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n\r\n}\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n    chatAPI.stop()\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkType => async (dispatch) => {\r\n    chatAPI.sendMessage(message)\r\n}\r\n\r\n\r\nexport default chatReducer\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionsType>\r\n","import { ThunkAction } from \"redux-thunk\";\r\nimport { AppStateType, InferActionsTypes } from \"./redux-store\";\r\n\r\n\r\n\r\nlet initialState = {\r\n   errorMessage: null as string | null,\r\n   errorsMode: true,\r\n};\r\ntype initialStateType = typeof initialState;\r\ntype ActionTypes = InferActionsTypes<typeof actions>\r\n\r\nconst errorsReducer = (state = initialState, action: ActionTypes): initialStateType => {\r\n   switch (action.type) {\r\n      case \"ON_MODE\":\r\n         return {\r\n            ...state,\r\n            errorsMode: true,\r\n            errorMessage: action.errorMessage,\r\n         };\r\n      case \"OFF_MODE\":\r\n         return {\r\n            ...state,\r\n            errorsMode: false,\r\n            errorMessage: null,\r\n         };\r\n      default:\r\n         return state;\r\n   }\r\n};\r\n\r\n\r\nexport const actions = {\r\n   activateMode: (errorMessage: string | null) => ({ type: 'ON_MODE', errorMessage } as const),\r\n   deactivateMode: () => ({ type: 'OFF_MODE' } as const)\r\n}\r\n\r\n\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>\r\n\r\nexport const showError = (errorMessage: string | null): ThunkType => (dispatch) => {\r\n   dispatch(actions.activateMode(errorMessage));\r\n};\r\n\r\nexport default errorsReducer;","import React, { Component } from 'react';\nimport s from './Footer.module.scss'\nexport const Footer: React.FC = React.memo(() => {\n  return (\n    <footer className={s.Footer}>\n      <div className={s.container}>\n        <p className={s.Footer__copy}>©My Social App, 2022</p>\n      </div>\n    </footer>\n  )\n})\n\n\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport logo from '../../../src/assets/images/logo.png';\nimport userPhoto from '../../assets/images/user.png';\nimport { authUserLogOut } from '../../redux/auth-reducer';\nimport { getUserProfile } from '../../redux/profile-reducer';\nimport { getIsAuth, getLogin, getUserId } from '../../selectors/auth-selectors';\nimport { getProfile } from '../../selectors/profile-selectors';\nimport { ProfileType } from '../../types/types';\nimport s from './Header.module.scss';\n\ntype PropsType = {\n  isAuth: boolean\n  login: string | null\n  profile: ProfileType | null\n  authUserLogOut: () => void\n}\n\n\nexport const HeaderContainer: React.FC = React.memo(() => {\n  const isAuth = useSelector(getIsAuth);\n  const login = useSelector(getLogin);\n  const userId = useSelector(getUserId)\n  const profile = useSelector(getProfile)\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (userId == null) {\n      return;\n    }\n    dispatch(getUserProfile(userId))\n  }, []);\n\n  let onLogOutUser = () => {\n    dispatch(authUserLogOut());\n  }\n\n  return (\n    <Header\n      isAuth={isAuth}\n      login={login}\n      authUserLogOut={onLogOutUser}\n      profile={profile}\n    />\n  )\n})\n\n\nconst Header: React.FC<PropsType> = React.memo((props) => {\n  const { isAuth, login, authUserLogOut, profile } = props\n\n\n  return (\n    <header className={s.header}>\n      <div className={s.container}>\n        <div className={s.headerBody}>\n          <div className={s.logo}>\n            <img src={logo} alt=\"logo\" />\n          </div>\n          <div className={s.loginBlock}>\n            {isAuth ?\n              <div className={s.login_wrapper}>\n                <div className={s.login_ava}>\n                  <img src={profile?.photos.small || userPhoto} />\n                </div>\n                <p className={s.login}>{login}</p>\n                <Link onClick={authUserLogOut} className={s.btn} to={'/users'}>Log Out</Link>\n              </div>\n              : <Link to={'/login'}>Log In</Link>}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n})\n\n\n\n\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADsQAAA7EB9YPtSQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA7sSURBVHic7Z15lBTVvcc/1dU909OzMcyiAw6yDLLI9gAVCZ7HEXQwmPdQhIcaEMMziRijRDFRR0h4nrgiSsxBRX1qAPG8ExcEFSEkAkYBDYsiqKAg+zAwe8/S013vj4KerqqeoQe6blVP1+ecPoe63Kn6dt1v33vrLr+CxOJKYDHwDVAHKB3gUwt8BfwZGBG/W9Wx6AqswfrCEvF5C8iLz23rGPQHDmF9wYj87AUujMfNS3RygD1YXyBWfLYBaed+C9vGbfYFzpFSoFdkQqcs+MVNMHIY+Ey/PSZSJ6PUydT6FT7aFuLFlUHqGjQ5BgN3A4+YKUMy8+TnSCZQBnhPJ/TuDmuXQrculmmKK8qxFGh0AfD1DwpjZjVxuFyJzHICKAQCZmlwmXXiOFBCROFLEixb2HEKH0DKCIb/3aebxEu/9eiz5AKjzNRgZwNcHHkwqC8MH2iVFJPwhjSHJZe6KCowVMoDzJRg5z7AeZEHPbtFy+KG9Ing7h79DEoj1H8Iga/iLi4uuBRDUq8uEgfKNOnnmynBzgaQIw/ccpQc+UshfXLbZ1Ga4OgV0Lg5jtLiRJQeWJTvGe2bxw07NwFtI6Wpv/4z5ksB3yTz9SQoCWwALzH/OAJfmColkbFzE9B+ArtA8bccK43gfxdq/2KdJpvTsQxwfCo0fW61ioQicZsAh7jgGCDJcQyQ5CSuAUI12g4fQPCoNVoSmMQ1AM1Q8QBwajy9ej4ED1mqKBFJ7KeA6megbhlIqdB80Go1CUliGwAgeNxqBQlNAjcBDvHAMUCS4xggyXEMkOQ4BkhyHAMkOY4BkhzHAEmOY4AkxzFAkuMYIMlxDJDkOAZIchwDJDmOAZIcxwBJjmOAJCfxVwTFmb37Ye3HcKQMTlRATjb0KIJLBsOAi6xWF38cAwDBICx5Gx57DnbtaT1fv2L4+Y0wcyqkGGI5JCbJ2wQoQIOLXV/IDC6RmH5v24UP6v/P+h8YcDVs2CJEpekknwECEsoJD8pBLx+sdDPixiA79xoDNbTFt/tg7M3w2pvmSBRJcjUB1W6USvUrf/Z1iIkPNeFvMGZL86YwpH9PMtPTOFlZw669B6nTZWwKwPR7ITMdrisRId4cksYAykkP1KrxBMoqFCY8EDAUflFhHr+fdRNTfnIFvrRUAs1Bjh6voL6hiTUbtjJ/8dt8f+BYyzkVuOUe6N8b+vQU+W3iR3I0AVXucOEDzHulWR+OjdEjBrL1vWf42eSx+NJSAfC4ZQpys0n1uBl/5SW8/+rvuXbMJZq/q6mD2X80/yuYRcc3QEBCqW6p6L49qLB4ZVCTZXC/Hqx4qZTcnEzDn6emeMjM9IX//fTc2/j3y7SBu979G2zaZoJ2AXR4AyiVbrXHf4olHwYJNLccy7KLJU//hsz01sOOZmf4wvGcZJeL+aUzSPd5NXleXxFH0QLp2AZQgHptHKF3Nmp//ZPHj2JAn7bjMsuyC683JXycm5PJxHGXa/KsXHduUq2iYxugQVv4NX7YoXvkm3xtbIE4U3UjP2N+NERzvHc/1Ed5orA7HdsAzdpAfIfKjc/7wwcWx3Qqt1t7q3p0O8+Q50hZO7TZhA5tAEUbiZVjJ40GOC8/J6ZzSbpblZXhM+SpqIpdm13o0AZAV96BoDGLJ2oI0uShYxvA4Yw4Bkhy7GoANxA1PrhDfLGjAXoAfwfGWS0kGbCbAaYBOzD5LRkOLdhlNjAf9YWQ/2m1kGTDDgYoAV4GOtDbgBIHK5sAH7AIeJ8ohe9NTTH8gUP8scoAxcCnwC/RvTjFm5rCnLumMKHEeY2uCKwwwGXAFsDwDrBB/bqz6n/ncOuksbZ+oWFHQnQfYCjwAdApMlGWXdwxbTx33nIt7iQfmhWNSAPkob4ZW1P4RYV5LH/2Prp1zae5OcpgvYOpiGwCFqMb3Rs+qJjPVy1g5LC+AmU4RCKqBhgPTIhM6N+7iA//Mo+c7AxBEhyiIaIGkADNutl0n5c3n3/AKXwbIMIAY4FBkQmld06mT8+uAi7tcCZEGGBa5EFBbjZ33fofAi7rEAtmG8AN/DgyYcZ/XUWa1xnlswtmG6AP0Dky4bqSy1vJ6mAFZhtgcORBmjeFoQN6mXxJh/ZgtgE0kzzF3QuRZbstQUhuzC6NrMiDnKzEfeyTdJMT7ihGTsSBTLMNoOntpaTYYfnB2eFyaR3gS0s11GZVNSIVxQenPo4RWdZOUkmSRHZmuiZtXwK+utAxQIx4ZBlJ1w5c1EO7jmXbVyIVxQfHALEiGTeI9isu0hyv2SBSUHxwDNAOfLoBrCsuvVhzvGc/bN0pUtG54xigHfh8qZqVSiOH9cXnTdXkWfiKUEnnjGOAduCW5XD8IFCbBP3axSVvwc5vRCs7e2xjAN1TluZGA9TVCxTTBp2yMzS1wPRJYzSdw+Yg3D0PQiHj3xqIkqfW+D3r2q8ydmxjALdbO0ag37e/eRua2D5W4XHLZGW2xAbo3b0LE67W1gJrP4bHn4/hZM3a21/jh+17Da4w9eHSNgbQ/+IvG6yNzFxeAU+9KFJR63TKStcMat33y+sNQaMefBKWvdP2eZR67e1/+LVm6hsN2T46e6VnxjYGSE9LJcXTclMH9r2QHkXaMCwPPqkGdG4KiFanRZIkCjpnh0cCz8/P4eF7fqrJEwqpQSSfW9rKSYISnApfV98IpYubeXK5oYr7BPguruJ12GZsVpIkCnKzOXK8gmAwhCRJzP7F9cwsXRTOEwzC7x6DJ1+AS4dAG5HdVAJBCLSECTlW0b6YwG3hdsucn5fD0XJV74SSEWzZ8S3L3mn5wTYH4fZSePMD6JSlO0GDBKEA1X6FTV+FqKw1XEIB7o+b4FawjQFAvaldCjpzsqqGOn8j14wexs0TRrP07X9o8pVXwHt/j+WMCmDeDI3HI1NYkENZeRVNgWbm3XMzVTV+Vq3ThhJfszHaX5+xl/hHTK7+wUZNwGlk2UV+52yKCvPI75zFM3Nv49ZJY62W1SpuWeb8/Bx1csjlYsFDM+Kxre0xYE4c5J0R2xngNLLsIt3nJTcnk5ef+DV/fe5+2y4kdbnU5isrw4fH4+ap0hnc+/PrDDOIMbANdbf074ihiogHtmoC2uL6cZdzXckIPv9iL+s3f8mBw+X4G4xd5rY4dPQEq9Z9ZpJC6NwpA5dLorK6jjumjadPz67cPe9FQ6h51MJ9DWgCaoH9qFFRvjBNXCskjAFA7SgOH1TM8EGxBXfUs3bjdlMNAOojYkhRqK7xM3bUEJY/O5tpsxZQUaXp5bmAemCmqWJiwLZNQCLTOTsjPK4x4KILWbbw3miBJW9Ht2TeChwDmEReTlY4CGXfXhfw/CN3aMY5TrEINSiWZSSVAfTr+szE5ZLIy215+B/xb3148FeT9dl8wOPiVBlJKgP0urBQ0zM3+6ki1eMhI71liHjaxCsZO2qIPtsNwEhThbRBUhmg+wUFPD3nNnJzMunTsysvPf5r06+Zk52hmS2cc9cUw8oi4AHThbSC2QbQjL2GQvEbij1b7px+LeVbl7J73SJ+NLyf6deTXS4yI2qBosI8brlhjD7bj4GL9YkiMNsAJzQHFQm4bjoO6J8AbptytT4KmgTcIlLTacw2wNHIg2PllSZfzp643TLeiGo/r3MW14weps/2UyxokoUb4PCxkyZf0p6kp2vXC0y8xrBJthAwuMJszDbAZiA8e68oCqvX/8vkS9qTNN3i0RFD+5KdaRgculqYoFOYbYBq4J+RCctXJODi+Tjgll2aEHiyy8VIYydU+N55EW3Oe5EHH27YyqdbvxZwWfuR6tE+/g292LBV3jBIYDYiDPAy6oxXmPseeYVgUMhsp63weLT7C/sVX6DP0hUQuoVahAHKgT9HJmzYvJN5C5cLuLS9cOs2mF5QmB8tm9BFD6IeO+YDFZEJD//pDd5a/Ymgy9sD/QKRgtzsaNkKhIg5hSgDHAemEjEyGAopTPnVE6zduF2QBOvR7y5uJViW0AhaIgceVgFPRSY0BZq54fZH2LF7n0AZ1hFtNlJ2GYpAaLRs0SNP96O+ICJMVY2fcdPm8v2BY4KliCekaOdCGpsCBI17yEzdCqZHtAECwCRgU2TikbIKSqbOpexEAr57tR3oJ8N0y8TCyULEnMKK6eA61ODRuyITv913mKtufojKaqE/AKGEdL/249EN3+ENAOos4Th0Gx937N7HpJmP0mSHXaAmoK8BWqnxqoWIOYWVC0J+QDWBZnZo7cbtTJu1wBZrB+KN/oUYh4wTY8fp4H0APTuBnwD+yMQ3Vm7grj+8YI0iE2ls0tZsG7cY4skIDzBjtQFAnSyaDGjuzrOvruLhP71hjSITCAZDBJpbvmJ9QxMbtxjCipm+F1CPHQwA6hjBf6NbQvbQ/KUsfn21NYriTF29dnfQu3/bTH1Dkz7b+/oEs7HTK7q2ozYFV0UmvvePz+nfu4j+vRP4ZeIKlFdUh/s1jU0BZpYuokYb9+YbBGwH12OXGuA0T6DOG4QJBkNMnbWAjzZ9aZGkc6e2voFARAfwhWWro62MWoiuBhSBHd/PKAGvos4dhMnO9LH+/x5lUN/ulog6W0KKwqGjJ8LT3+s37eRns5/RjwAeBHoDhl2kZmO3GgDUX8EMWhky/vq7Q9aoOktOVNSEC/+b7w5x59znow3/3o0FhQ/2NAC0DBl/Gpl4pKyCUTf8lk/+tdsaVe2ksrouvDV83T93MPH2R6mu9euzLQf+KlrbaezUCdQTAN5GHScIr5zw1zfy+or1ZKanMXRgcbTZNFtQVeOnsrqOmtp6nnrxHf7w9DIajdGtvkR9n6LhcUAUduwD6ClCfT427KLtV1zEvN/cxPgrL7HNi6gUBU5WVrNn/1FWrNnEoiXvtzbp8x1wBXBYrEItiWAAUF85uwa4KNp/pvu8XDN6GIP7daeoSz7n5XUyLL8ym5o6P98fKGPvD0f4+LNd7Ni1D0VptVO/DXU72BFxChOfTsBK1E5iIn9eQt0W7nAWSMB04BjWF2R7P7tRA0A5xIF0YDawB+sLtq1PCNgI3IhNO9yJ0gdoDQm4FHVL1WVAXyAXtbkQTSNQgxrxazewAVgN7LNAS8z8P0B6IsFR2zeEAAAAAElFTkSuQmCC\"","import { ThunkAction } from \"redux-thunk\";\r\nimport { usersAPI } from \"../api\";\r\nimport { UsersType } from \"../types/types\";\r\nimport { showError } from \"./errors-reducer\";\r\nimport { AppStateType, InferActionsTypes } from \"./redux-store\";\r\n\r\nexport type LinksType = {\r\n   id: number\r\n   address: string\r\n   name: string\r\n}\r\n\r\nlet initialState = {\r\n   links: [\r\n      { id: 1, address: \"profile\", name: \"Profile\", },\r\n      { id: 2, address: \"dialogs\", name: \"Dialogs\", },\r\n      { id: 3, address: \"chat\", name: \"Chat\", },\r\n      { id: 4, address: \"users\", name: \"Users\", },\r\n   ] as Array<LinksType>,\r\n   friends: [] as Array<UsersType>,\r\n   pageSize: 3,\r\n   totalUserCount: 0,\r\n   currentPage: 1,\r\n   isFetching: false\r\n};\r\n\r\ntype initialStateType = typeof initialState\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actions>\r\n\r\n\r\nconst sidebarReducer = (state = initialState, action: ActionsTypes): initialStateType => {\r\n   switch (action.type) {\r\n      case \"SET_FRIENDS\": {\r\n         return {\r\n            ...state,\r\n            friends: action.friends\r\n         }\r\n      };\r\n      case 'SET_PAGE':\r\n         return {\r\n            ...state, currentPage: action.currentPage,\r\n         };\r\n      case 'SET_TOTAL_COUNT':\r\n         return {\r\n            ...state, totalUserCount: action.totalCount,\r\n         };\r\n      case 'SET_IS_FETCHING':\r\n         return {\r\n            ...state, isFetching: action.isFetching,\r\n         };\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n\r\nexport const actions = {\r\n   setFriends: (friends: Array<UsersType>) => ({ type: 'SET_FRIENDS', friends } as const),\r\n   setPage: (currentPage: number) => ({ type: 'SET_PAGE', currentPage } as const),\r\n   setTotalCount: (totalCount: number) => ({ type: 'SET_TOTAL_COUNT', totalCount } as const),\r\n   setIsFetching: (isFetching: boolean) => ({ type: 'SET_IS_FETCHING', isFetching } as const),\r\n}\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionsTypes>\r\n\r\nexport const requestFriends = (currentPage: number, pageSize: number): ThunkType => async (dispatch) => {\r\n   try {\r\n      dispatch(actions.setIsFetching(true));\r\n      let data = await usersAPI.getFiends(currentPage, pageSize);\r\n      dispatch(actions.setFriends(data.items));\r\n      dispatch(actions.setTotalCount(data.totalCount));\r\n      dispatch(actions.setIsFetching(false));\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\nexport const setFriendsPage = (p: number, pageSize: number): ThunkType => async (dispatch) => {\r\n   try {\r\n      dispatch(actions.setIsFetching(true));\r\n      dispatch(actions.setPage(p));\r\n      let data = await usersAPI.getFiends(p, pageSize);\r\n      dispatch(actions.setFriends(data.items));\r\n      dispatch(actions.setIsFetching(false));\r\n   } catch (error: any) {\r\n      dispatch(showError(error.message));\r\n   }\r\n};\r\n\r\nexport default sidebarReducer;","import { AppStateType } from \"../redux/redux-store\";\r\n\r\nexport const getLinks = (state: AppStateType) => {\r\n   return state.sidebar.links\r\n};\r\nexport const getFriends = (state: AppStateType) => {\r\n   return state.sidebar.friends\r\n};\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n   return state.sidebar.pageSize\r\n};\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n   return state.sidebar.currentPage\r\n};\r\n\r\nexport const getTotalUserCount = (state: AppStateType) => {\r\n   return state.sidebar.totalUserCount\r\n};\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n   return state.sidebar.isFetching\r\n}","import React from 'react';\r\nimport s from './Preloader.module.scss'\r\n\r\n\r\nconst MiniPreloader: React.FC = React.memo(() => {\r\n   return (\r\n      <div className={s.wrapper}>\r\n         <div className={s.ldsDualRing}></div>\r\n      </div>\r\n   );\r\n})\r\n\r\nexport default MiniPreloader;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport userPhoto from '../../../assets/images/user.png';\r\nimport { UsersType } from '../../../types/types';\r\nimport MiniPreloader from '../../common/MiniPreloader/Preloader';\r\nimport s from './Friends.module.scss';\r\n\r\n\r\ntype FriendsPropsType = {\r\n   friends: [] | Array<UsersType>\r\n   isFetching: boolean\r\n}\r\ntype FriendPropsType = {\r\n   name: string\r\n   id: number\r\n   photo: any\r\n}\r\n\r\n\r\nexport const Friends: React.FC<FriendsPropsType> = React.memo((props) => {\r\n   const { friends, isFetching } = props\r\n   let friendsElements = friends.map(f => <Friend key={f.id} name={f.name} photo={f.photos.small} id={f.id} />)\r\n   return (\r\n      <div className={s.friends}>\r\n         <h2 className={s.title}>Friends</h2>\r\n         <div className={s.flex}>\r\n            {isFetching ? <MiniPreloader /> : friendsElements}\r\n         </div>\r\n      </div >\r\n   );\r\n})\r\n\r\nconst Friend: React.FC<FriendPropsType> = React.memo((props) => {\r\n   const { name, id, photo } = props\r\n   return (\r\n      <div className={s.friend}>\r\n         <Link className={s.icon} to={'/profile/' + id}>\r\n            <img src={photo ? photo : userPhoto} alt=\"\" />\r\n         </Link>\r\n         <p className={s.name}>{name}</p>\r\n      </div>\r\n   );\r\n})\r\n\r\n","import React, { Component } from 'react';\r\nimport s from '../Sidebar.module.scss'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ntype PropsType = {\r\n   address: string\r\n   name: string\r\n}\r\n\r\nexport const Menu_link: React.FC<PropsType> = React.memo((props) => {\r\n   let path = \"/\" + props.address;\r\n   return (\r\n      <li className={s.sidebar__link}>\r\n         <NavLink to={path} activeClassName={s.active}>{props.name}</NavLink>\r\n      </li>\r\n   );\r\n})\r\n\r\n\r\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LinksType, requestFriends } from '../../redux/sidebar-reducer';\nimport { getIsAuth } from '../../selectors/auth-selectors';\nimport { getCurrentPage, getFriends, getIsFetching, getLinks, getPageSize } from '../../selectors/sidebar-selectors';\nimport { UsersType } from '../../types/types';\nimport { Friends } from './Friends/Friends';\nimport { Menu_link } from './Menu_link/Menu_link';\nimport s from './Sidebar.module.scss';\n\ntype PropsType = {\n  links: [] | Array<LinksType>\n  friends: [] | Array<UsersType>\n  isAuth: boolean,\n  isFetching: boolean\n}\n\n\nexport const SidebarContainer: React.FC = React.memo(() => {\n  const links = useSelector(getLinks)\n  const friends = useSelector(getFriends)\n  const isAuth = useSelector(getIsAuth)\n  const isFetching = useSelector(getIsFetching)\n  const currentPage = useSelector(getCurrentPage)\n  const pageSize = useSelector(getPageSize)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(requestFriends(currentPage, pageSize))\n  }, []);\n\n  return (\n    <Sidebar\n      links={links}\n      friends={friends}\n      isAuth={isAuth}\n      isFetching={isFetching}\n    />\n  )\n})\n\n\nconst Sidebar: React.FC<PropsType> = React.memo((props) => {\n  let menuElements = props.links.map((l: LinksType) => <Menu_link key={l.id} name={l.name} address={l.address} />)\n  return (\n    <nav className={s.Sidebar}>\n      <ul className={s.Sidebar__list}>\n        {menuElements}\n      </ul>\n      {props.isAuth && <Friends\n        isFetching={props.isFetching}\n        friends={props.friends}\n      />}\n    </nav >\n  );\n})","import { ThunkAction } from 'redux-thunk';\r\nimport { authUserData } from './auth-reducer';\r\nimport { showError } from './errors-reducer';\r\nimport { AppStateType, InferActionsTypes } from './redux-store';\r\n\r\n\r\nlet initialState = {\r\n   initialized: false,\r\n};\r\ntype initialStateType = typeof initialState\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>\r\n\r\nconst appReducer = (state = initialState, action: ActionTypes): initialStateType => {\r\n   switch (action.type) {\r\n      case 'INITIALIZED_SUCCESS': {\r\n         return {\r\n            ...state,\r\n            initialized: true,\r\n         };\r\n      };\r\n      default:\r\n         return state;\r\n   };\r\n};\r\n\r\n\r\nexport const actions = {\r\n   setInitialized: () => ({ type: 'INITIALIZED_SUCCESS' } as const),\r\n}\r\n\r\n\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>\r\n\r\nexport const initializedApp = (): ThunkType => {\r\n   return (dispatch) => {\r\n      try {\r\n         let promise = dispatch(authUserData());\r\n         Promise.all([promise])\r\n            .then(() => {\r\n               dispatch(actions.setInitialized());\r\n            });\r\n      } catch (error: any) {\r\n         dispatch(showError(error.message));\r\n      }\r\n   }\r\n};\r\n\r\n\r\nexport default appReducer;","import React, { Suspense, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Switch, withRouter } from 'react-router';\r\nimport { Route } from 'react-router-dom';\r\nimport { compose } from 'redux';\r\nimport './App.scss';\r\nimport ErrorPopup from './components/common/ErrorPopup/ErrorPopup';\r\nimport Preloader from './components/common/Preloader/Preloader';\r\nimport { Footer } from './components/Footer/Footer';\r\nimport { HeaderContainer } from './components/Header/Header';\r\nimport { SidebarContainer } from './components/Sidebar/Sidebar';\r\nimport { initializedApp } from './redux/app-reducer';\r\nimport { getInitialized } from './selectors/auth-selectors';\r\n\r\n\r\n\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst LoginContainer = React.lazy(() => import('./components/Login/Login'));\r\nconst NotFound = React.lazy(() => import('./components/NotFound/NotFound'));\r\nconst ChatPage = React.lazy(() => import('./components/Chat/ChatPage'));\r\n\r\n\r\nconst App: React.FC = () => {\r\n\r\n  const initialized = useSelector(getInitialized)\r\n  let dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(initializedApp())\r\n  }, []);\r\n\r\n  if (!initialized) {\r\n    return <Preloader />\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\" >\r\n      <ErrorPopup />\r\n      <HeaderContainer />\r\n      <SidebarContainer />\r\n      <div className=\"app__wrapper_content\">\r\n        <Suspense fallback={<Preloader />}>\r\n          <Switch>\r\n            <Route exact path='/' component={ProfileContainer} />\r\n            <Route path='/profile/:userId?' component={ProfileContainer} />\r\n            <Route path='/dialogs' component={DialogsContainer} />\r\n            <Route path='/users' component={UsersContainer} />\r\n            <Route path='/login' component={LoginContainer} />\r\n            <Route path='/chat' component={ChatPage} />\r\n            <Route path='*' component={NotFound} />\r\n          </Switch>\r\n        </Suspense>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default compose<React.ComponentType>(\r\n  withRouter,\r\n)(App)","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { applyMiddleware, combineReducers, createStore } from \"redux\";\r\nimport profileReducer from './profile-reducer';\r\nimport dialogsReducer from './dialogs-reducer';\r\nimport sidebarReducer from './sidebar-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport appReducer from './app-reducer';\r\nimport errorsReducer from './errors-reducer';\r\nimport chatReducer from \"./chat-reducer\";\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n   profilePage: profileReducer,\r\n   dialogsPage: dialogsReducer,\r\n   sidebar: sidebarReducer,\r\n   usersPage: usersReducer,\r\n   auth: authReducer,\r\n   app: appReducer,\r\n   errors: errorsReducer,\r\n   chat: chatReducer,\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n\r\n\r\ntype PropertiesTypes<T> = T extends { [key: string]: infer U } ? U : never;\r\nexport type InferActionsTypes<T extends { [key: string]: (...args: any[]) => any }> = ReturnType<PropertiesTypes<T>>\r\n\r\nlet store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport store from './redux/redux-store'\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux'\r\n\r\n\r\nReactDOM.render(\r\n   <BrowserRouter>\r\n      <Provider store={store}>\r\n         <App />\r\n      </Provider>\r\n   </BrowserRouter>,\r\n   document.getElementById('root')\r\n);\r\n\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\n"],"sourceRoot":""}